# 医院药房智能管理系统 (HPIMS) - 项目计划文档

## 项目概述

医院药房管理系统是一个基于前后端分离架构的医药库存和处方管理平台，支持药品审核、库存控制和处方处理功能。

### 项目目标
- 实现药品基本信息管理和智能审核
- 提供完整的库存入库和出库管理
- 支持处方录入和发药管理
- 建立角色权限控制的管理界面
- 完成课程设计要求的功能展示

## 系统架构设计

### 整体架构
```
┌─────────────────────────────────────────────────┐
│              用户界面层 (前端)                   │
│  ┌─────────────────────────────────────────┐     │
│  │  HTML/CSS/JavaScript + Bootstrap       │     │
│  │  - 管理员界面                          │     │
│  │  - 医生界面                            │     │
│  │  - 护士界面                            │     │
│  │  - 药师界面                            │     │
│  └─────────────────────────────────────────┘     │
├─────────────────────────────────────────────────┤
│              应用服务层 (后端)                   │
│  ┌─────────────────┬─────────────────────┐      │
│  │  Spring Boot    │     Python服务       │      │
│  │  (Java)         │   (Flask/Django)    │      │
│  │                 │                     │      │
│  │ - 用户认证      │   - 药品审核算法     │      │
│  │ - 角色权限      │   - 智能审核        │      │
│  │ - 药库管理      │                     │      │
│  │ - 处方流转      │                     │      │
│  └─────────────────┴─────────────────────┘      │
├─────────────────────────────────────────────────┤
│              数据访问层                        │
│  ┌─────────────────────────────────────────┐     │
│  │  MyBatis/JPA + MySQL                  │     │
│  │  - 用户表                              │     │
│  │  - 药品表                              │     │
│  │  - 处方表                              │     │
│  │  - 库存表                              │     │
│  │  - 审核记录表                          │     │
│  └─────────────────────────────────────────┘     │
├─────────────────────────────────────────────────┤
│              外部接口层                        │
│  ┌─────────────────────────────────────────┐     │
│  │  - HIS系统对接 (预留接口)              │     │
│  │  - 数据导出 (Excel)                    │     │
│  │  - 日志记录                            │     │
│  └─────────────────────────────────────────┘     │
└─────────────────────────────────────────────────┘
```

### 技术栈选型

#### 前端技术栈
- **核心技术**: HTML5, CSS3, JavaScript
- **UI框架**: Bootstrap 5.x
- **工具**: Git, 浏览器开发者工具

#### Java后端技术栈 (Spring Boot)
- **框架**: Spring Boot 2.7.x
- **ORM**: MyBatis 3.x (或 JPA)
- **安全**: Spring Security (可选)
- **数据库**: MySQL 8.0
- **构建工具**: Maven
- **文档**: Swagger/OpenAPI

#### Python服务技术栈
- **框架**: Flask 或 Django
- **算法库**: scikit-learn, pandas, numpy
- **用途**: 药品审核算法、智能分析
- **通信**: RESTful API

#### 开发工具
- **版本控制**: Git
- **建模工具**: StarUML 或 Draw.io
- **数据库工具**: MySQL Workbench

## 功能模块设计

### 核心功能模块

#### 1. 用户管理模块
- 用户登录认证
- 角色管理 (管理员、药剂师)

#### 2. 药品管理模块
- 药品信息录入 (名称、规格、厂家、价格)
- 药品信息查询和修改
- 药品删除功能

#### 3. 库存管理模块
- 药品入库管理
- 药品出库管理
- 库存查询功能

#### 4. 处方管理模块
- 处方录入 (患者信息、药品信息、数量)
- 处方查询和发药状态更新

## 团队成员分工

### 开发团队构成
- **李教博**: 主要负责Java后端开发 (70%用户与角色管理 + 30%药库管理)
- **田纹搴**: 主要负责Python药品审核算法 (100%药品审核逻辑)
- **易禹**: 主要负责前端开发和文档编写 (前端界面 + 系统分析设计)

### 详细分工方案

#### 李教博 (Java后端开发)
**负责模块**:
1. 用户管理模块 (Java) - 70%
2. 药库管理模块 (Java) - 30%
3. 系统基础架构搭建
4. 数据库设计和实现

**具体任务**:
- Spring Boot项目初始化和配置
- 用户认证和角色权限管理
- 药品信息管理 (基础CRUD)
- 库存管理 (入库、出库、查询)
- 处方管理 (录入、查询、发药)
- RESTful API设计和实现
- 数据库表结构设计 (用户表、药品表、处方表、库存表、审核记录表)
- 实体类、Mapper层、Service层开发
- 与Python服务的API对接

**预期成果**:
- 完整的Spring Boot后端系统
- 15-20个RESTful API接口
- 数据库设计文档和ER图
- 单元测试代码

#### 田纹搴 (Python药品审核算法)
**负责模块**:
1. 药品审核模块 (Python + 算法) - 100%

**具体任务**:
- 设计药品审核算法逻辑
- 实现药品兼容性检查算法
- 开发药品用量合理性验证
- 创建药品相互作用检测算法
- 实现审核结果评分机制
- 开发Flask/Django RESTful API服务
- 与Spring Boot后端集成
- 编写算法测试用例

**预期成果**:
- 独立的Python审核服务
- 完整的药品审核算法
- API接口文档
- 算法测试报告
- 审核规则配置文档

#### 易禹 (前端开发和文档)
**负责模块**:
1. 前端界面 (HTML/CSS/JS) - 100%
2. 系统分析和设计文档

**具体任务**:
- 需求定义和用例分析
- 用例图绘制和用例描述编写
- 概念模型类图设计
- 系统架构设计 (文字+图)
- 功能模块划分图设计
- 界面原型设计 (流程图/原型)
- 前端页面开发 (登录、药品管理、库存管理、处方管理等)
- Bootstrap样式优化
- 前后端API对接
- 用户体验优化
- 报告撰写 (概述、系统分析、总体设计、详细设计部分)
- 文档最终校对与排版

**预期成果**:
- 完整的Web前端界面
- 系统分析和设计文档
- UI原型图和流程图
- 完整的课程设计报告
- 项目演示材料

## 数据库设计

### 核心数据表 (7张)

#### 1. 用户表 (sys_user)
- id (主键)
- username (用户名)
- password (密码)
- role (角色: admin/doctor/nurse/pharmacist)
- real_name (真实姓名)
- department (科室)
- create_time (创建时间)
- update_time (更新时间)

#### 2. 药品表 (medicine)
- id (主键)
- name (药品名称)
- generic_name (通用名)
- specification (规格)
- manufacturer (厂家)
- price (价格)
- stock_quantity (库存数量)
- min_stock (最低库存预警)
- category (药品分类)
- approval_number (批准文号)
- create_time (创建时间)
- update_time (更新时间)

#### 3. 库存表 (inventory)
- id (主键)
- medicine_id (药品ID)
- batch_number (批号)
- quantity (库存数量)
- expiry_date (有效期)
- location (存放位置)
- status (状态: 正常/过期/停用)
- create_time (创建时间)

#### 4. 入库记录表 (stock_in)
- id (主键)
- medicine_id (药品ID)
- batch_number (批号)
- quantity (入库数量)
- supplier (供应商)
- in_date (入库日期)
- operator (操作员)
- create_time (创建时间)

#### 5. 出库记录表 (stock_out)
- id (主键)
- medicine_id (药品ID)
- batch_number (批号)
- quantity (出库数量)
- out_date (出库日期)
- operator (操作员)
- reason (出库原因: 处方发药/盘亏/过期等)
- create_time (创建时间)

#### 6. 处方表 (prescription)
- id (主键)
- prescription_number (处方编号)
- patient_name (患者姓名)
- patient_age (患者年龄)
- patient_gender (患者性别)
- doctor_name (医生姓名)
- department (开方科室)
- create_date (开方日期)
- status (状态: 未审核/审核通过/审核驳回/已发药/已退药)
- audit_result (审核结果)
- audit_time (审核时间)
- create_time (创建时间)
- update_time (更新时间)

#### 7. 处方明细表 (prescription_detail)
- id (主键)
- prescription_id (处方ID)
- medicine_id (药品ID)
- quantity (数量)
- dosage (用法用量)
- frequency (频次)
- days (天数)
- create_time (创建时间)

#### 8. 审核记录表 (audit_record)
- id (主键)
- prescription_id (处方ID)
- audit_type (审核类型: 自动审核/人工审核)
- audit_result (审核结果: 通过/驳回/警告)
- audit_score (审核评分)
- issues_found (发现的问题)
- suggestions (建议)
- auditor (审核员)
- audit_time (审核时间)
- create_time (创建时间)

## 一周开发计划

### Day 1: 需求定义和总体设计
**李教博**:
- [ ] 系统架构设计（文字+图）
- [ ] 数据库设计（ER图+表）
- [ ] Spring Boot项目初始化
- [ ] MyBatis配置和基础结构搭建

**田纹搴**:
- [ ] 药品审核算法需求分析
- [ ] Python服务框架选择 (Flask/Django)
- [ ] 审核算法初步设计

**易禹**:
- [ ] 用例图绘制
- [ ] 用例描述编写
- [ ] 概念模型类图设计
- [ ] 功能模块划分图

### Day 2: 详细设计和用户管理开发
**李教博**:
- [ ] 用户管理模块详细设计
- [ ] 用户实体类和Mapper开发
- [ ] 用户登录认证接口开发
- [ ] 角色权限管理实现

**田纹搴**:
- [ ] 药品审核算法详细设计
- [ ] Python审核服务API接口设计
- [ ] 审核规则和评分机制定义

**易禹**:
- [ ] 界面原型设计（流程图/原型）
- [ ] 前端页面框架搭建
- [ ] 登录页面开发

### Day 3: 药品审核模块和药库管理开发
**李教博**:
- [ ] 药品管理模块开发 (基础CRUD)
- [ ] 库存管理模块开发 (入库/出库)
- [ ] 数据库表结构实现

**田纹搴**:
- [ ] 药品审核算法核心实现
- [ ] Python服务开发和测试
- [ ] 与Spring Boot的API对接测试

**易禹**:
- [ ] 药品管理前端页面开发
- [ ] 库存管理前端页面开发
- [ ] 前端样式优化 (Bootstrap)

### Day 4: 处方管理和系统集成
**李教博**:
- [ ] 处方管理模块开发
- [ ] 审核记录表管理
- [ ] 处方审核流程集成

**田纹搴**:
- [ ] 审核算法优化和测试
- [ ] 批量审核功能实现
- [ ] 审核结果统计分析

**易禹**:
- [ ] 处方管理前端页面开发
- [ ] 系统管理界面开发
- [ ] 前后端联调测试

### Day 5: 前端完善和接口设计
**李教博**:
- [ ] 接口设计与数据模型定义完善
- [ ] API文档编写 (Swagger)
- [ ] 系统集成测试

**田纹搴**:
- [ ] 审核算法性能优化
- [ ] 异常处理和错误日志
- [ ] 审核规则配置接口

**易禹**:
- [ ] 前端界面完善和优化
- [ ] 用户体验改进
- [ ] 响应式设计适配

### Day 6: 系统测试和集成
**李教博**:
- [ ] 单元测试编写
- [ ] 系统集成与调试
- [ ] 性能测试和优化

**田纹搴**:
- [ ] 单元测试编写
- [ ] 系统集成与调试
- [ ] 算法准确性验证

**易禹**:
- [ ] 系统集成与调试
- [ ] 前端功能测试
- [ ] 用户界面测试

### Day 7: 报告撰写和最终完善
**李教博**:
- [ ] 总体设计部分报告撰写
- [ ] 详细设计部分报告撰写
- [ ] 总结与体会撰写

**田纹搴**:
- [ ] 详细设计部分报告撰写
- [ ] 总结与体会撰写

**易禹**:
- [ ] 概述、系统分析部分报告撰写
- [ ] 文档最终校对与排版
- [ ] 项目演示材料准备

## 项目规范

### 代码规范
- **Java**: 遵循阿里巴巴Java开发规范
- **Python**: 遵循PEP 8规范
- **前端**: 遵循Vue.js官方风格指南
- 使用Git进行版本控制
- 提交前进行代码审查

### 数据库规范
- 表名使用下划线命名
- 字段使用驼峰命名
- 必须添加字段注释
- 建立适当的索引
- 使用外键约束保证数据完整性

### 接口规范
- RESTful API设计
- 统一的响应格式
- 完善的错误处理
- API版本控制
- 详细的接口文档

## 风险评估与应对

### 技术风险
1. **技术栈不熟悉**: 通过培训和学习克服
2. **时间进度**: 制定详细开发计划，按阶段交付
3. **系统性能**: 进行性能测试和优化

### 沟通风险
1. **成员配合**: 定期开会讨论进度
2. **需求变更**: 建立变更控制流程

## 验收标准

### 功能验收
- [ ] 所有核心功能正常运行
- [ ] 用户界面友好易用
- [ ] 数据处理准确无误
- [ ] 系统响应时间符合要求

### 文档验收
- [ ] 完整的系统设计文档
- [ ] 详细的用户使用手册
- [ ] 完整的测试报告
- [ ] 项目总结报告

---

**文档版本**: v1.0
**最后更新**: 2025年12月9日
**项目周期**: 2025年12月 - 2026年3月
